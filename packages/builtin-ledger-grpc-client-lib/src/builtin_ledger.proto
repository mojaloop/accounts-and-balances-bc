syntax = "proto3";

service GrpcBuiltinLedger {
  // All unary RPCs.
  rpc CreateAccounts(GrpcAccountArray) returns (GrpcIdArray);
  rpc CreateJournalEntries(GrpcJournalEntryArray) returns (GrpcIdArray);
  rpc GetAccountsByIds(GrpcIdArray) returns (GrpcAccountArray);
  rpc GetJournalEntriesByAccountId(GrpcId) returns (GrpcJournalEntryArray);
}

/* Id. */

message GrpcId {
  string grpcId = 1;
}

message GrpcIdArray {
  repeated GrpcId grpcIdArray = 1;
}

/* Account. */

message GrpcAccount {
  string id = 1;
  string state = 2;
  string type = 3;
	string currencyCode = 4;
  string debitBalance = 5;
  string creditBalance = 6;
  string balance = 7;
  uint64 timestampLastJournalEntry = 8;
}

message GrpcAccountArray {
  repeated GrpcAccount grpcAccountArray = 1;
}

/* Journal entry. */

message GrpcJournalEntry {
  string id = 1;
	string currencyCode = 2;
	string amount = 3;
	string debitedAccountId = 4;
  string creditedAccountId = 5;
  uint64 timestamp = 6;
}

message GrpcJournalEntryArray {
  repeated GrpcJournalEntry grpcJournalEntryArray = 1;
}
